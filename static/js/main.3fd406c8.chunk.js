(this["webpackJsonpmy-favorites"]=this["webpackJsonpmy-favorites"]||[]).push([[0],{73:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(13),i=n.n(c),u=n(15),o=n(10),s=n.n(o),d={supplementalCountriesUrl:"https://admithub-suppl-countries.herokuapp.com/supplemental/countries/",restcountriesUrl:"https://restcountries.eu/rest/v2/name/",countriesUrl:"https://admithub-suppl-countries.herokuapp.com/pinned/countries/"},l=function(){return s()({method:"GET",url:d.countriesUrl})},f=n(18),j=n(9),h=n.n(j),p=n(14),b=function(){var t=Object(p.a)(h.a.mark((function t(e){var n,r,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,m(e).then((function(t){n=t.data})).catch((function(t){return console.log(t)}));case 3:return r=[],t.next=6,O(e).then((function(t){r=t.data})).catch((function(t){return console.log(t)}));case 6:if(a=Array.from(new Set(n.map((function(t){return t.name})))).map((function(t){var e;return null!==(e=r.find((function(e){return e.name===t})))&&void 0!==e?e:n.find((function(e){return e.name===t}))})),c=[].concat(Object(f.a)(a),Object(f.a)(r)),!e||0!==c.length){t.next=10;break}throw new Error("No countries found for input: ".concat(e));case 10:return t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s()({method:"GET",url:"".concat(d.restcountriesUrl).concat(e,"?fields=name;flag;numericCode")}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s()({method:"GET",url:"".concat(d.supplementalCountriesUrl).concat(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=n(38),v=n(12),x=n(37),C=n(4),y=function(t){var e=t.country,n=t.flag,r=t.numericCode,a=t.buttonDisplay,c=t.buttonText,i=t.handleClick;return Object(C.jsxs)(v.a.Item,{children:[Object(C.jsx)(x.a,{src:n,alt:e,width:"50",height:"30",thumbnail:!0})," ",e,a&&Object(C.jsx)(g.a,{variant:"outline-secondary",className:"float-right",value:r,onClick:i,children:c})]})},S=n(43),w=n(39),k=function(t){var e=t.countryList,n=t.pinnedCountries,r=t.setCountryList,a=t.setSavingFavorites,c=t.setLoading,i=t.setErrorMessage,u=t.setPinnedCountries,o=function(){var t=Object(p.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c(!0),i(""),a(!0),b(e).then((function(t){r(t.slice(0,5)),c(!1),a(!1)})).catch((function(t){console.log("My",t),r([]),i(t.toString()),c(!1),a(!1)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(t){var n=t.currentTarget.getAttribute("value");if(m(n)){var r=e.find((function(t){return t.numericCode.toString().padStart(3,"0")===n}));r&&(a(!0),function(t){return s()({method:"POST",url:d.countriesUrl,data:{numericCode:t.numericCode,name:t.name,flag:t.flag}})}(r).then((function(t){l().then((function(t){u(t.data)})),a(!1)})).catch((function(t){u((function(t){return[].concat(Object(f.a)(t),[r])})),a(!0)})))}},m=function(t){return"number"===typeof t?!n.find((function(e){return e.numericCode===t})):!n.find((function(e){return e.numericCode.toString().padStart(3,"0")===t}))};return Object(C.jsxs)("div",{children:[Object(C.jsx)(w.a,{size:"lg",children:Object(C.jsx)(S.a,{"aria-label":"Large","aria-describedby":"inputGroup-sizing-sm",placeholder:"Start typing a country name here",onChange:function(t){return o(t.target.value)}})}),Object(C.jsx)(v.a,{children:e.map((function(t,e){return Object(C.jsx)(y,{country:t.name,flag:t.flag,numericCode:t.numericCode,buttonDisplay:m(t.numericCode),buttonText:"+",handleClick:j},e)}))})]})},E=function(t){var e=t.pinnedCountries,n=t.setSavingFavorites,r=t.setPinnedCountries,a=function(t){var a=t.currentTarget.getAttribute("value");if(a){var c=e.find((function(t){return t.numericCode.toString().padStart(3,"0")===a.padStart(3,"0")}));c&&(n(!0),function(t){if(t)return s()({method:"DELETE",url:"".concat(d.countriesUrl).concat(t.id,"/")});throw new Error("Country is not valid")}(c).then(n(!1)).catch(n(!1)).finally((function(){var t=e.filter((function(t){return t.numericCode.toString().padStart(3,"0")!==a.padStart(3,"0")}));r(t)})))}};return Object(C.jsx)(v.a,{children:e.map((function(t,e){return Object(C.jsx)(y,{country:t.name,flag:t.flag,numericCode:t.numericCode,buttonDisplay:!0,buttonText:"x",handleClick:a},e)}))})},L=n(40),T=n(28),U=function(t){var e=t.loading,n=t.errorMessage;return Object(C.jsx)("div",{className:"mt-5",children:e?Object(C.jsxs)(T.a,{variant:"success",children:[Object(C.jsx)(L.a,{animation:"border"})," Loading ..."]}):n&&Object(C.jsx)(T.a,{variant:"danger",children:n})})},M=n(11),P=n(24),D=n(41),F=n(42),G=function(){var t=Object(r.useState)(!1),e=Object(u.a)(t,2),n=e[0],a=e[1],c=Object(r.useState)(!1),i=Object(u.a)(c,2),o=i[0],s=i[1],d=Object(r.useState)([]),f=Object(u.a)(d,2),j=f[0],h=f[1],p=Object(r.useState)([]),b=Object(u.a)(p,2),m=b[0],O=b[1],g=Object(r.useState)(""),v=Object(u.a)(g,2),x=v[0],y=v[1];return Object(r.useEffect)((function(){o||0!==m.length||(a(!0),l().then((function(t){t.data.length>0&&O(t.data),a(!1)})).catch((function(){return a(!1)})))}),[o,m]),Object(C.jsx)(D.a,{fluid:!0,className:"p-2",children:Object(C.jsxs)(F.a,{children:[Object(C.jsx)(P.a,{md:"5",children:Object(C.jsxs)(M.a,{children:[Object(C.jsx)(M.a.Header,{as:"h4",children:"Look up countries"}),Object(C.jsx)(M.a.Body,{children:Object(C.jsx)(k,{countryList:j,pinnedCountries:m,setCountryList:h,setSavingFavorites:s,setLoading:a,setErrorMessage:y,setPinnedCountries:O})})]})}),Object(C.jsx)(P.a,{md:"2",children:Object(C.jsx)(U,{loading:n,errorMessage:x})}),Object(C.jsx)(P.a,{md:"5",children:Object(C.jsxs)(M.a,{children:[Object(C.jsx)(M.a.Header,{as:"h4",children:"Selected Countries"}),Object(C.jsx)(M.a.Body,{children:Object(C.jsx)(E,{pinnedCountries:m,setSavingFavorites:s,setPinnedCountries:O})})]})})]})})};n(72);i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(G,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.3fd406c8.chunk.js.map